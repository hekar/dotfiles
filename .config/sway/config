# Input configuration
input * {
    xkb_layout us
    xkb_variant basic
    xkb_options ctrl:nocaps,compose:ralt
    repeat_delay 200
    repeat_rate 30
    scroll_factor 1
}

# Output configuration - Set to 100Hz
output HDMI-A-1 {
    mode 1920x1080@100Hz
    scale 1
    position 0,0
    max_render_time 5
}

# Set the external monitor brightness to 50% on startup
exec_always ddcutil setvcp 10 20 --display 1

# Font configuration
font pango:JetBrains Mono 10

# Colors (gruvbox dark)
set $bg #282828
set $fg #ebdbb2
set $black #282828
set $red #cc241d
set $green #98971a
set $yellow #d79921
set $blue #458588
set $purple #b16286
set $aqua #689d6a
set $gray #a89984
set $darkgray #3c3836
set $lightgray #ebdbb2

# Window colors
client.focused $blue $blue $fg
client.focused_inactive $darkgray $darkgray $gray
client.unfocused $darkgray $darkgray $gray
client.urgent $red $red $fg
client.placeholder $darkgray $darkgray $gray
client.background $bg

# Bar configuration (waybar)
bar {
    swaybar_command waybar
}

# Default orientation for new containers
default_orientation auto

# Hide edge borders
hide_edge_borders none

# Focus follows mouse
focus_follows_mouse yes

# Mouse warping
mouse_warping none

# Window gaps
gaps inner 8
gaps outer 4
smart_gaps on

# Window borders
for_window [class="^.*"] border pixel 2

# Floating windows
for_window [class="floating"] floating enable
for_window [class="floating"] resize set 400 300
for_window [class="floating"] move position center

# Application-specific rules
for_window [class="firefox"] floating disable
for_window [class="Thunderbird"] floating disable
for_window [class="Alacritty"] floating disable
for_window [class="Code"] floating disable

# Floating applications
for_window [class="pavucontrol"] floating enable
for_window [class="nm-connection-editor"] floating enable
for_window [class="blueman-manager"] floating enable
for_window [class="file_progress"] floating enable
for_window [class="file_progress"] resize set 500 100
for_window [class="file_progress"] move position center
for_window [class="file_progress"] border pixel 0
for_window [class="file_progress"] background #000000
for_window [class="file_progress"] opacity 0.8

# Workspace assignments
assign [class="firefox"] 1
assign [class="Thunderbird"] 2
assign [class="Code"] 3
assign [class="Alacritty"] 4

# Workspace names
set $ws1 "1: Web"
set $ws2 "2: Mail"
set $ws3 "3: Code"
set $ws4 "4: Terminal"
set $ws5 "5: Media"
set $ws6 "6: Social"
set $ws7 "7: Games"
set $ws8 "8: Misc"
set $ws9 "9: Misc"
set $ws10 "10: Misc"

# Key bindings
set $mod Mod4

# Basic movement
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move windows
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Split containers
bindsym $mod+b splith
bindsym $mod+v splitv

# Toggle floating
bindsym $mod+Shift+space floating toggle

# Focus parent/child
bindsym $mod+a focus parent

# Fullscreen
bindsym $mod+f fullscreen

# Kill window
bindsym $mod+Shift+q kill

# Reload configuration
bindsym $mod+Shift+c reload

# Exit sway
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

# Application launcher
bindsym $mod+d exec rofi -show drun -show-icons
bindsym $mod+Return exec alacritty

# Screenshots
bindsym $mod+s exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Shift+s exec grim - | wl-copy
bindsym $mod+Alt+s exec grim -g "$(slurp)" ~/Pictures/Screenshots/screenshot-$(date +%Y%m%d-%H%M%S).png
bindsym $mod+Shift+Alt+s exec grim ~/Pictures/Screenshots/screenshot-$(date +%Y%m%d-%H%M%S).png

# Volume control
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle

# Brightness control
bindsym XF86MonBrightnessUp exec brightnessctl set +10%
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

# Media keys
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# Workspace switching
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Switch to next/previous workspace
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# Resize mode
mode "resize" {
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Window mode
mode "window" {
    bindsym h focus left
    bindsym j focus down
    bindsym k focus up
    bindsym l focus right
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+w mode "window"

# Layout mode
mode "layout" {
    bindsym h splith
    bindsym j splitv
    bindsym k splitv
    bindsym l splith
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+e mode "layout"

# Scratchpad
set $scratchpad "scratchpad"
bindsym $mod+minus move scratchpad
bindsym $mod+equal scratchpad show

# Lock screen
bindsym $mod+l exec swaylock --color 000000

# Lock and suspend
bindsym $mod+Shift+z exec swaylock -f --color 000000 && systemctl suspend

# Notification daemon
exec_always dunst

# Auto-start applications
exec_always /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Idle configuration
exec swayidle -w \
    timeout 300 'swaylock -f --color 000000' \
    timeout 600 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
    before-sleep 'swaylock -f --color 000000'

# Performance optimizations
exec_always systemctl --user import-environment DISPLAY WAYLAND_DISPLAY
exec_always hash dbus-update-activation-environment 2>/dev/null
exec_always dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY

# Steam environment variables for Wayland compatibility
exec_always export XDG_CURRENT_DESKTOP=sway
exec_always export XDG_SESSION_DESKTOP=sway
exec_always export XDG_SESSION_TYPE=wayland

# XDG Desktop Portal
exec_always /usr/lib/xdg-desktop-portal-wlr

# Cursor theme
seat seat0 xcursor_theme Adwaita 24

# Window rules for better performance
for_window [class=".*"] focus_on_window_activation urgent
for_window [class=".*"] focus_on_window_activation smart

# Disable window decorations for fullscreen applications
for_window [app_id=".*"] title_format "%title"
for_window [class=".*"] title_format "%title"

# Focus follows mouse for better workflow
focus_follows_mouse yes

# Mouse acceleration
input * {
    accel_profile flat
    pointer_accel 0.0
}

# Touchpad configuration
input type:touchpad {
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

# Keyboard repeat rate
input type:keyboard {
    repeat_delay 200
    repeat_rate 30
}

# Window swallowing
for_window [class=".*"] inhibit_idle fullscreen
